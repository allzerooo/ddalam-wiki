- [프로세스와 스레드](#프로세스와-스레드)
- [스레드](#스레드)
- [Thread-safe](#thread-safe)

## 프로세스와 스레드
**프로세스**란 간단히 표현하자면, "실행 중인 프로그램"이라고 할 수 있다. 프로그램을 실행하면 OS로부터 실행에 필요한 자원(메모리)을 할당받아 프로세스가 된다.

프로세스는 프로그램을 수행하는데 필요한 데이터, 메모리 등의 자원과 스레드로 구성되어 있다. 프로세스의 자원을 이용해 실제로 작업을 수행하는 것이 **스레드**이다.

둘 이상의 스레드를 가진 프로세스를 '멀티스레드 프로세스'라고 한다.

스레드가 작업을 수행하는데 개발적인 메모리 공간(호출스택)을 필요로 하기 때문에 프로세스의 메모리 한계에 따라 생성할 수 있는 스레드의 수가 결정된다.

## 스레드
한 개의 스레드로 작업을 수행하는 것보다 여러 개의 스레드로 작업을 수행하는데 시간이 더 걸릴 수 있다. 그 이유는 스레드간의 작업을 전환(context switching)하는 시간이 걸리기 때문이다. 또한, CPU 외 다른 자원이 필요하다면 한 스레드가 그 자원을 사용하는 동안 다른 스레드는 그 자원을 사용할 수 있을 때까지 기다려야 하는 대기시간이 발생할수도 있기 때문이다.

context switching을 할 때는 현재 진행 중인 작업의 상태, 다음에 실행해야할 위치(PC, 프로그램 카운터) 등의 정보를 저장하고 읽어 오는 시간이 소요된다. 

context switching은 프로세스 사이에서도 일어나는데, 프로세스의 스위칭이 스레드의 스위칭 보다 더 많은 정보를 처리해야되기 때문에 더 많은 시간이 소요된다.

그래서 싱글 코어에서 단순히 CPU만을 사용하는 계산 작업이라면 멀티스레드보다 싱글스레드로 프로그래밍하는 것이 더 효율적이다.

싱글 코어에서는 멀티스레드라도 하나의 코어가 번갈아가면서 작업을 수행하기 때문에 여러 스레드의 작업이 절대 겹치지 않는다. 그러나 멀티 코어에서 멀티스레드로 작업을 수행하면, 동시에 두 스레드가 수행될 수 있기 때문에 스레드의 작업이 겹치는 부분이 발생할 수 있다. 이 때, 하나의 자원을 두고 두 스레드가 경쟁하게 될 수도 있다.
만약, 두 스레드가 서로 다른 자원을 사용하는 작업의 경우에는 멀티스레드가 더 효율적이다. 예를 들어 입출력을 필요로 하는 두 스레드(입력만 받는 스레드, 출력만 하는 스레드)가 있을 때 싱글스레드로 개발하면 입력을 마칠 때까지 출력 스레드는 기다리기만 해야한다. 하지만 두 개의 스레드로 개발하면 입력을 기다리는 동안 출력을 처리할 수 있기 때문에 보다 보다 효율적으로 CPU를 사용할 수 있다.

- 병행(concurrent) : 여러 스레드가 여러 작업을 동시에 진행
- 병렬(parallel) : 하나의 작업을 여러 스레드가 나눠서 처리

OS의 프로세스 스케줄러와 기타 프로그램의 스레드 스케줄러에 따라 스레드의 실행순서, 할당된 시간 등이 달라지기 때문에 스레드의 이러한 불확실성을 염두에 두고 개발해야 한다.

## Thread-safe
멀티 스레드 프로그래밍에서 일반적으로 어떤 함수, 변수, 객체가 여러 스레드로부터 동시에 접근이 이루어져도 프로그램의 실행에 문제가 없음을 뜻한다. 보다 엄밀하게는 하나의 함수가 한 스레드로부터 호출되어 실행 중일 때, 다른 스레드가 그 함수를 호출하여 동시에 함께 실행되더라도 각 스레드에서의 함수의 수행 결과가 올바로 나오는 것으로 정의한다.

<br/>

---

<br/>

참고 및 출처
- [스레드 안전](https://ko.wikipedia.org/wiki/%EC%8A%A4%EB%A0%88%EB%93%9C_%EC%95%88%EC%A0%84)
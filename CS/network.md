# Network

- [Network](#network)
  - [인터넷 통신](#인터넷-통신)
  - [IP(Internet Protocol)](#ipinternet-protocol)
    - [IP의 역할을 정리](#ip의-역할을-정리)
    - [IP 방식의 한계](#ip-방식의-한계)
  - [TCP](#tcp)
    - [인터넷 프로토콜 스택 4계층](#인터넷-프로토콜-스택-4계층)
    - [<a name="socket_and_port"></a>Socket과 Port](#socket과-port)

<br/>
<br/>

## 인터넷 통신

네트워크 디바이스들은 어떻게 통신을 할까? 

직접 케이블을 연결해 통신할 수도 있고, 인터넷 망을 통해 통신하기도 한다.

인터넷 망을 사용한 통신은 통신에 참여하는 네트워크 디바이스들 간의 통신을 위해 광케이블, 인공위성 등을 거칠수도 있다. 그리고 수많은 중간 노드(서버)를 거쳐야 할 수도 있다. 이렇듯 어떤 것들을 거쳐간 결과 통신이 이루어지는 것이다.

통신하려는 네트워크 디바이스들 사이에 어떤 중간 노드를 거치던 원하는 네트워크 디바이스와 통신하기 위해 `IP 프로토콜`이라는 개념이 사용된다.

<br/>
<br/>

## IP(Internet Protocol)

`IP(Internet Protocol)`은 인터넷 망에 있는 네트워크 디바이스들 간 통신을 할 수 있도록 정해놓은 규약 중 하나다. IP 주소(IP Address)라는 개념을 사용하며, 패킷(Packet)이라는 통신 단위로 데이터를 전달하는 규약이다.

인터넷 망에 있는 네트워크 디바이스들은 IP 주소를 부여받는다. 따라서, 인터넷 망이 복잡하더라도 목적지를 지정할 수 있는 주소가 있기 때문에 데이터를 전달하는 것이 가능하다.

통신 메시지를 지정한 IP 주소로 전송할 때는 IP 패킷이라는 규칙에 따라 전송한다. IP 패킷은 통신의 출발지 IP, 목적지 IP와 기타 정보들을 포함한다. 이렇게 IP 패킷을 만들어 인터넷 망으로 보내면 인터넷 망에 있는 서버들도 동일하게 IP 규약을 따르고 있기 때문에 IP 패킷의 정보를 이해할 수 있는 것이다. 이 패킷 정보로 패킷이 최종 목적지에 도달할 수 있도록 서버들끼리 패킷을 주고받는다.

<br/>

### IP의 역할을 정리
- 지정한 IP 주소에 데이터 전달
- 패팃이라는 통신 단위로 데이터 전달

<br/>

### IP 방식의 한계
1. 비연결성
    - 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷 전송 (ex. 목적지 서버가 꺼져있어도 전송한다)
2. 비신뢰성
    - 목적지에 도착 전 중간 서버가 문제가 상겨 중간에 패킷이 사라지면?
    - 패킷들이 서로 다른 경로로 목적지에 도착할 때 패킷이 순서대로 안오면?
3. 프로그램 구분
    - 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상이면? 

<br/>

→ IP는 위와 같은 문제들을 해결할 수 없다

<br/>

이런 IP의 한계를 해결해주는 프로토콜이 TCP이다

<br/>
<br/>

## TCP

### 인터넷 프로토콜 스택 4계층
- 애플리케이션 계층 - HTTP, FTP, ...
- 전송 계청 - TCP, UDP
- 인터넷 계층 - IP
- 네트워크 인터페이스 계층

인터넷 프로토콜 스택은 위와 같이 구성되어 있는데, IP 계층 위에 TCP, UDP를 올려서 IP 계층을 보완해준다.

<br/>

<p align="center">
    <img src="../image/internet_protocol_4_layer.png"  width="600" height="auto" alt="출처 - [인프런 - 모든 개발자를 위한 HTTP 웹 기본 지식(김영한)]">
</p>

<br/>
예를 들어,

1. 채팅 프로그램으로 미국에 있는 사용자에게 Hello, world! 메시지를 보내려고 한다
2. 채팅 프로그램은 SOCKET 라이브러리를 통해 운영체제 계층에 메시지를 전송한다
3. OS 계층에서는 메시지에 TCP 정보를 씌운다
4. OS 계층에서 TCP 밑의 IP 계층에서는 TCP 정보 밖에 IP와 관련된 정보를 씌워 IP 패킷을 생성한다 
5. IP 패킷이 네트워크 인터페이스의 LAN 카드를 통해 외부 서버로 나갈 때 Ethernet frame을 씌운다. Ethernet frame은 랜 카드에 등록된 맥 주소와 같은 물리적인 정보를 포함한다

<br/>


### <a name="socket_and_port"></a>Socket과 Port

> Socket이 전화기라면 Port는 전화번호

소켓을 이용하면 내부적으로 어떻게 통신하는지 정확하게 알지 못하더라도 컴퓨터끼리 네트워크상에서 데이터를 주고받을 수 있다. 소켓을 생성한다는 것은 전화기를 한 대 구입하는 것에 비유할 수 있다. 일반 전화기와의 차이점은 전화를 거는 용도의 소켓과 전화를 수신하는 용도의 소켓을 생성하는 방법에 차이가 있다는 것이다.

전화기에 전화번호가 부여되듯 소켓에는 주소 정보가 할당되는데 소켓의 주소 정보는 IP와 PORT번호로 구성된다.

<br/>

---

<br/>

참고

- [인프런 - 모든 개발자를 위한 HTTP 웹 기본 지식(김영한)](https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC#)
- [네트워크 프로그래밍과 소켓의 이해](https://gaussian37.github.io/c-linux-socket-01/)
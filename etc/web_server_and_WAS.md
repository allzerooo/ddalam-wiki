# Web Server와 Web Application Server

## Web Server

HTML, JSON, IMAGE, 서버간 데이터 통신 등 현재 거의 모든 형태의 데이터 전송은 HTTP 프로토콜을 기반으로 이루어진다.

웹 서버 또한 이러한 HTTP 프로토콜을 기반으로 동작하는 서버로 정적 리소스(HTML, CSS, JS, 이미지, 영상과 같은 정적 파일)와 기타 부가기능을 제공한다.

웹 서버로 HTTP 프로토콜을 사용해 어떤 정적 리소스를 요청하면 웹 서버 또한 HTTP 프로토콜을 사용해 정적 리소스를 그대로 서빙한다.

이처럼 HTTP 프로토콜로 데이터 통신을 하며 + 정적 데이터를 제공하는 것을 웹 서버라 한다.

대표적으로 Nginx, Apache라는 웹 서버가 있다.

<br/>

## WAS(Web Application Server)

WAS도 HTTP를 기반으로 동작하며, 웹 서버의 기능을 대부분 포함하고 있다(정적 리소스를 제공하는).

웹 서버와의 큰 차이는 프로그램 토드를 실행해서 애플리케이션 로직을 수행할 수 있다는 것이다. 애플리케이션 로직을 수행할 수 있다는 것은 컨텐츠를 특정 사용자마다 다르게 표현해주는 것과 같이 동적 리소스를 제공할 수 있다는 것을 의미한다.

따라서 동적 HTML 제공, HTTP API(Rest API) 제공, 서블릿, JSP, 스프링 MVC와 같은 것들이 WAS에서 동작하게 된다. 

대표적으로 Tocmat, Jetty, Undertow가 있다.

<br/>

## Web Server VS WAS

이 둘의 경계는 모호하다. 

웹 서버가 프로그램을 실행하는 기능을 포함하기도 하고, WAS도 웹 서버의 기능을 제공하기 때문이다. 따라서 WAS는 애플리케이션 코드를 실행하는데 더 특화되어 있는 것으로 이해하면 좋겠다.

<br/>

### Web Server, WAS로 시스템 구성

웹 시스템을 구성할 때,

`WAS(정적 리소스, 애플리케이션 로직 모두 제공) + DB`로 구성할 수 있다.

하지만 이렇게 구성하면 WAS가 너무 많은 역할을 담당하게 된다 → 서버 과부하의 우려 + 정적 리소스는 시스템 측면에서 값싼 리소스이며 애플리케이션 로직은 값 비싼 리소스인데 정적 리소스 처리를 위해 애플리케이션 로직의 수행이 어려울 수 있다. 또한, WAS는 애플리케이션 로직을 수행하며 장애가 발생할 수 있는데 이러한 구성은 오류 화면도 노출이 불가능할 수 있다.

따라서 일반적으로는

`웹 서버(정적 리소스 처리) + WAS(애플리케이션 로직 처리) + DB` 구조를 많이 사용한다.

이렇게 하면 WAS는 애플리케이션 로직만 전담할 수 있고 웹 서버는 정적 리소스를 처리, 필요에 따라 WAS를 호출하는 로직을 수행해 업무를 분담할 수 있다.

또 시스템 리소스를 효율적으로 관리할 수 있는데 정적 리소스가 많이 사용되면 웹 서버를 증설, 애플리케이션 로직이 많이 사용되면 WAS를 증설하면 된다.

그리고 웹 서버는 정적 리소스만 처리하기 때문에 장애가 잘 일어나지 않는다. 따라서 WAS, DB 장애시 오류 화면을 제공할 수 있다.

<br/>

---

<br/>

출처

[스프링 MVC 1편 - 백엔드 웹 개발 핵심 기술](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-mvc-1/dashboard)